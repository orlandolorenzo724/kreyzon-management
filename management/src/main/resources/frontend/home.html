<html>
    <head>

        <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>

        <!-- Include Bootstrap CSS and JavaScript -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
        
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

        <!-- Include custom CSS -->
        <link rel="stylesheet" href="/css/style.css ">
      
        <title>Home</title>

        <style>
            #send-mail-button {
                display: block;
                margin: 0 auto;
                width: 80%;
            }

            #elaborate-data-button {
                display: block;
                margin: 0 auto;
                width: 80%;
            }
        </style>
    </head>

    <body>
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="home.html">OL Digital Solutions Prospecting Management</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav">
                <li class="nav-item active">
                  <a class="nav-link" href="home.html">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/pages/prospect/prospect-search.html">Prospects</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/pages/email/email-search.html">Emails</a>
                </li>
              </ul>
            </div>
        </nav>

        <!-- Page content -->
        <div class="container mt-5">
            <h1>Welcome to the Home page!</h1>
            <p>This is the home page of your prospecting database. You can use the navbar at the top to navigate to other pages.</p>
        </div>

        <br><br>

        <button id="elaborate-data-button" class="btn btn-primary">Elaborate data</button>

        <br></br>

        <button id="send-mail-button" class="btn btn-primary">Send mail</button>

        <script>
            $(document).ready(function() {
                $('#send-mail-button').click(function() {
                    Swal.fire({
                        title: 'Send Emails',
                        text: 'Are you sure you want to send the emails?',
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Yes, send request',
                        cancelButtonText: 'No, cancel'
                        }).then((result) => {
                        if (result.value) {
                            $.ajax({
                                url: 'http://localhost:8080/api/mail-engine',
                                type: 'POST',
                                success: function(response) {
                                    // Do something with the response
                                    Swal.fire({
                                    title: 'Emails Sent!',
                                    text: response.length + " emails have been sent!",
                                    icon: 'success',
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    })
                                }
                            });
                        }
                    });
                });
            });

            $(document).ready(function() {
                $('#elaborate-data-button').click(function() {
                    Swal.fire({
                        title: 'Elaborate data',
                        text: 'Are you sure?',
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Yes, send request',
                        cancelButtonText: 'No, cancel'
                        }).then((result) => {
                        if (result.value) {
                            $.ajax({
                                url: 'http://localhost:8080/api/temp-prospect',
                                type: 'POST',
                                success: function(response) {
                                    // Do something with the response
                                    Swal.fire({
                                    title: 'Data elaborated!',
                                    text: "Success",
                                    icon: 'success',
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    })
                                }
                            });
                        }
                    });
                });
            });


        </script>

    </body>
</html>